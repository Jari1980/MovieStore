@model IEnumerable<Movie_Store.Models.ViewModells.ShoppingVM>

<head>
    <title>Purchase Completed</title>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
</head>
<br />
<br />
<br />
<header style="text-align:center; border: solid green 2px; padding:20px">

    <h2>Thank you!</h2>
    <br />
    <h3>Your order has been placed.</h3>
    <br />
    <br />
    <p>An email recepit including the details about your order has not been sent to the the email address provided.</p>


</header>

<br />

<body>

    <table class="table" border="0">
        <thead>
            <tr>
                <th id="1">Title/Quantity Price</th>
                
               
            </tr>
        </thead>
        <tbody>
            @{
                if (Model != null)
                {
                    int i = 0;
                    int copies = 1;
                    List<string> shopList = new List<string>();
                    @foreach (var item in Model)
                    {
                        shopList.Add(@item.Title);
                    }


                    @for (int j = 0; j < shopList.Count; j++)
                    {
                        if (j == 0)
                        {
                            if (shopList.Count > 1)
                            {
                                if (shopList[i] == shopList[i + 1])
                                {
                                    copies++;
                                }
                                else
                                {
                                    <tr>
                                        <td id="1">
                                            <span>@shopList[j], copies: @copies price: @(@Model.ElementAt(j).Price * @copies)</span>
                                        </td>
                                       
                                       
                                    </tr>
                                    copies = 1;
                                }
                            }
                            else
                            {
                                <tr>
                                    <td id="1">
                                        <span>@shopList[j], copies: @copies price: @(@Model.ElementAt(j).Price * @copies)</span>
                                    </td>
                                    
                                   
                                </tr>
                                copies = 1;
                            }
                        }
                        else if (j < shopList.Count - 1)
                        {
                            if (shopList[j] == shopList[j + 1])
                            {
                                copies++;
                            }
                            else
                            {
                                <tr>
                                    <td id="1">
                                        <span>@shopList[j], copies: @copies price: @(@Model.ElementAt(j).Price * @copies)</span>
                                    </td>
                                    
                                </tr>
                                copies = 1;
                            }
                        }
                        else if (j == shopList.Count - 1)
                        {
                            <tr>
                                <td id="1">
                                    <span>@shopList[j], copies: @copies price: @(@Model.ElementAt(j).Price * @copies)</span>
                                </td>
                               
                            </tr>
                            copies = 1;
                        }
                        else
                        {
                            <tr>
                                <td id="1">
                                    <span>@shopList[j], copies: @copies price: @(@Model.ElementAt(j).Price * @copies)</span>
                                </td>
                                
                            </tr>
                            copies = 1;
                        }
                    }

                    double res = 0;
                    @foreach (var item in Model)
                    {
                        res = Math.Round((@item.Price + res), 2);
                    }

                    <tr>
                        <td>_________________________</td>
                    </tr>
                    <tr>
                        <td>
                            <span><b>Total order sum: @res </b></span>
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>

    <a href="Final">
    <input type="button" value="Click Me" />
    </a>
   @* <a asp-action="Final" asp-route-Final="Marcus">Final</a>*@

    <div style="display:inline-flex;">
        <ul class="list-group">
  <li class="list-group-item">
            <a class="nav-link" asp-area="" asp-controller="Home" asp-action="Index">To Home Page</a>
  </li>
  <li class="list-group-item">
            <a class="nav-link" asp-area="" asp-controller="Movies" asp-action="ShoppingView">Go Back To Movies</a>
  </li>
</ul>
    </div>


</body>






