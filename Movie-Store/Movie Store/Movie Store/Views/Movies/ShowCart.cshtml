@model IEnumerable<Movie_Store.Models.ViewModells.ShoppingVM>


@{
    if (Model != null && Model.GetEnumerator().MoveNext())
    {
        int i = 0;
        int copies = 1;
        List<string> shopList = new List<string>();
        @foreach (var item in Model)
        {
            shopList.Add(@item.Title);
        }


        @for (int j = 0; j < shopList.Count; j++)
        {
            if (j == 0)
            {
                if (shopList.Count > 1)
                {
                    if (shopList[i] == shopList[i + 1])
                    {
                        copies++;
                    }
                    else
                    {
                        <span>@shopList[j], copies: @copies price: @(@Model.ElementAt(j).Price*@copies)</span>
                        <br />
                        copies = 1;
                    }
                }
                else
                {
                    <span>@shopList[j], copies: @copies price: @(@Model.ElementAt(j).Price*@copies)</span>
                    <br />
                    copies = 1;
                }
            }
            else if (j < shopList.Count - 1)
            {
                if (shopList[j] == shopList[j + 1])
                {
                    copies++;
                }
                else
                {
                    <span>@shopList[j], copies: @copies price: @(@Model.ElementAt(j).Price*@copies)</span>
                    <br />
                    copies = 1;
                }
            }
            else if (j == shopList.Count - 1)
            {
                <span>@shopList[j], copies: @copies price: @(@Model.ElementAt(j).Price*@copies)</span>
                <br />
                copies = 1;
            }
            else
            {
                <span>@shopList[j], copies: @copies price: @(@Model.ElementAt(j).Price*@copies)</span>
                <br />
                copies = 1;
            }
        }

        double res = 0;
        @foreach (var item in Model)
        {
            res = @item.Price + res;
        }

        <br />
        <span>Total sum for shopping cart: @res</span>
    }
}
 



@*string title = "";
    int same = 1;
    if(title == @item.Title)
    {
        same = same + 1;
    }
    <p>@item.Title: @item.Price Kr(SEK)</p>*@


@*@model Movie_Store.Models.ViewModells.CartVM


@foreach(var item in @Model.MovieIds){
    <p>@item.ToString()</p>
   // <p>@item.Price</p>
}*@